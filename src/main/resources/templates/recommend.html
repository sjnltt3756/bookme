<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>책 추천</title>
    <link rel="stylesheet" th:href="@{/css/netflix-style.css}" />
</head>
<body>
<h2>추천 도서</h2>
<div style="padding: 0 20px 20px;">
    <a th:href="@{/preference}">
        <button style="background-color: #e50914; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
            🎯 선호 장르 설정
        </button>
    </a>
</div>
<div class="search-bar">
    <form th:action="@{/recommend}" method="get">
        <select name="category" style="padding: 10px;">
            <option value="title" th:selected="${category == 'title'}">제목</option>
            <option value="author" th:selected="${category == 'author'}">저자</option>
        </select>
        <input type="text" name="query" placeholder="검색어 입력" th:value="${query}" />
        <select name="size" style="padding: 10px; margin-left: 10px;">
            <option value="8" th:selected="${size == 8}">8개 보기</option>
            <option value="16" th:selected="${size == 16}">16개 보기</option>
            <option value="24" th:selected="${size == 24}">24개 보기</option>
        </select>
        <button type="submit">검색</button>
    </form>
</div>

<div class="book-grid">
    <div class="book-card" th:each="book : ${books}">
        <a th:href="${book.infoLink}" target="_blank">
            <img th:if="${book.thumbnail}" th:src="${book.thumbnail}" alt="book cover" />
        </a>
        <div class="book-info">
            <div th:text="${book.title}">책 제목</div>
            <div th:text="${#lists.isEmpty(book.authors) ? '저자 없음' : #strings.listJoin(book.authors, ', ')}">저자</div>
        </div>
        <div class="popup">
            <span th:text="'📘 ' + ${book.title}"></span><br/>
            <span th:text="${#lists.isEmpty(book.authors) ? '' : '✍ ' + #strings.listJoin(book.authors, ', ')}"></span>
        </div>
    </div>
</div>

<div th:replace="fragments/pagination :: pager(currentPage=${currentPage}, query=${query}, category=${category})"></div>

</body>
</html>